<div class="content-links">
	{% if write_access %}
	<a href="/user/connectkey/selectkey/{{ user.oid|urlencode }}/">connect password key</a>
	{% endif %}
</div>
<div class="content-header">
	Subkeys
</div>
<div class="content-data">
	<div id="display_subkeys">
		{% if subkey_list %}
		<table class="table-hover table-striped infotable" id="accordion-table">
      <thead>
        <tr>
          <th class="infotable">Name</th>
          <th class="infotable">Description</th>
          <th class="infotable">Action</th>
        </tr>
      </thead>
			{% for subkey in subkey_list %}
      <tr>
        {% if subkey.exists %}
          <!-- Jinja2 will never display this. -->
          <td>Password key deleted</td>
          <td>Password key deleted</td>
        {% else %}
          <td>{{ subkey.password_key.attributes.name|escape }}</td>
          <td>{{ subkey.password_key.attributes.description|escape }}</td>
        {% endif %}
        <td class="center">
          {% if write_access %}
          <a href="#collapse-{{subkey.oid}}" data-toggle="collapse" data-parent="#accordion-table" aria-expanded="true" aria-controls="collapse-{{subkey.oid}}">re-connect</a>&nbsp;&verbar;&nbsp;
          <a href="/user/subkey/delete/{{ subkey.oid }}/">disconnect</a>
          {% endif %}
        </td>
      </tr>
      <tr id="collapse-{{subkey.oid}}" class="collapse out">
        <td colspan="3" class="subkeyChildData">
          <form class="pull-right form-inline">
            <div class="form-group">
              <label class="sr-only" for="subkeyPasswordInput">Key password</label>
              <input type="password" class="form-control" id="subkeyPasswordInput" placeholder="Key password">
              <input type="text" hidden="true" value="{{subkey.oid}}">
            </div>
            <button type="submit" class="btn btn-primary">Re-connect {{subkey.password_key.attributes.name|escape}}</button>
          </form>
        </td>
      </tr>
			{% endfor %}
		</table>
		{% endif %}
	</div>
</div>
<br/>
<br/>
<br/>
